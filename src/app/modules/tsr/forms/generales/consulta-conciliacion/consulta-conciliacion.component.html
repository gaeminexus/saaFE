<section class="page">
  <header class="page-header">
    <h2>Generales · Consulta Conciliación</h2>
    <div class="actions">
      <button mat-stroked-button color="primary" (click)="buscar()">
        <mat-icon>search</mat-icon>
        Buscar
      </button>
    </div>
  </header>

  <div class="filters">
    <mat-form-field appearance="outline">
      <mat-label>Banco</mat-label>
      <input matInput [value]="banco()" (input)="banco.set($any($event.target).value)" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Cuenta</mat-label>
      <input matInput [value]="cuenta()" (input)="cuenta.set($any($event.target).value)" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha desde</mat-label>
      <input matInput [matDatepicker]="dpd" (dateChange)="fechaDesde.set($event.value)" />
      <mat-datepicker-toggle matSuffix [for]="dpd"></mat-datepicker-toggle>
      <mat-datepicker #dpd></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha hasta</mat-label>
      <input matInput [matDatepicker]="dph" (dateChange)="fechaHasta.set($event.value)" />
      <mat-datepicker-toggle matSuffix [for]="dph"></mat-datepicker-toggle>
      <mat-datepicker #dph></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Referencia</mat-label>
      <input matInput [value]="referencia()" (input)="referencia.set($any($event.target).value)" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Estado</mat-label>
      <mat-select [value]="estado()" (selectionChange)="estado.set($any($event.value))">
        <mat-option [value]="''">Todos</mat-option>
        <mat-option value="CONCILIADO">Conciliado</mat-option>
        <mat-option value="PENDIENTE">Pendiente</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="totals">
    <span>Total registros: {{ totalRegistros() }}</span>
    <span>Total movimientos: {{ totalMonto() | number : '1.2-2' }}</span>
  </div>

  <table mat-table [dataSource]="items()" class="mat-elevation-z1">
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef>Fecha</th>
      <td mat-cell *matCellDef="let row">{{ row.fecha | date : 'dd/MM/yyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="banco">
      <th mat-header-cell *matHeaderCellDef>Banco</th>
      <td mat-cell *matCellDef="let row">{{ row.banco }}</td>
    </ng-container>

    <ng-container matColumnDef="cuenta">
      <th mat-header-cell *matHeaderCellDef>Cuenta</th>
      <td mat-cell *matCellDef="let row">{{ row.cuenta }}</td>
    </ng-container>

    <ng-container matColumnDef="referencia">
      <th mat-header-cell *matHeaderCellDef>Referencia</th>
      <td mat-cell *matCellDef="let row">{{ row.referencia }}</td>
    </ng-container>

    <ng-container matColumnDef="descripcion">
      <th mat-header-cell *matHeaderCellDef>Descripción</th>
      <td mat-cell *matCellDef="let row">{{ row.descripcion }}</td>
    </ng-container>

    <ng-container matColumnDef="monto">
      <th mat-header-cell *matHeaderCellDef>Monto</th>
      <td mat-cell *matCellDef="let row" class="num">{{ row.monto | number : '1.2-2' }}</td>
    </ng-container>

    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef>Estado</th>
      <td mat-cell *matCellDef="let row">{{ row.estado }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</section>
