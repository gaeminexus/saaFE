<div class="form-container">
  <h2 mat-dialog-title>{{ isEditMode ? 'Editar' : 'Nueva' }} Naturaleza de Cuenta</h2>

  <mat-dialog-content class="form-content">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <!-- Nombre -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombre</mat-label>
        <input
          matInput
          formControlName="nombre"
          placeholder="Ingrese el nombre"
          [disabled]="loading"
        />
        <mat-error *ngIf="form.get('nombre')?.hasError('required')">
          El nombre es requerido
        </mat-error>
        <mat-error *ngIf="form.get('nombre')?.hasError('minlength')">
          Mínimo 3 caracteres
        </mat-error>
        <mat-error *ngIf="form.get('nombre')?.hasError('maxlength')">
          Máximo 100 caracteres
        </mat-error>
      </mat-form-field>

      <!-- Tipo de Naturaleza -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo de Naturaleza</mat-label>
        <mat-select formControlName="tipo" [disabled]="loading">
          <mat-option [value]="1">Deudora</mat-option>
          <mat-option [value]="2">Acreedora</mat-option>
        </mat-select>
        <mat-error *ngIf="form.get('tipo')?.hasError('required')"> El tipo es requerido </mat-error>
      </mat-form-field>

      <!-- Número de Cuenta -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Número de Cuenta</mat-label>
        <input
          matInput
          formControlName="numero"
          type="number"
          placeholder="Ingrese el número"
          [disabled]="loading"
        />
        <mat-error *ngIf="form.get('numero')?.hasError('required')">
          El número es requerido
        </mat-error>
        <mat-error *ngIf="form.get('numero')?.hasError('pattern')">
          Solo números permitidos
        </mat-error>
      </mat-form-field>

      <!-- Maneja Centro de Costo -->
      <div class="checkbox-container">
        <mat-checkbox formControlName="manejaCentroCosto" [disabled]="loading">
          Maneja Centro de Costo
        </mat-checkbox>
      </div>

      <!-- Estado -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Estado</mat-label>
        <mat-select formControlName="estado" [disabled]="loading">
          <mat-option [value]="1">Activo</mat-option>
          <mat-option [value]="0">Inactivo</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Error Message -->
      <div class="error-message" *ngIf="error">
        <mat-icon>error</mat-icon>
        {{ error }}
      </div>
    </form>
  </mat-dialog-content>

  <!-- Dialog Actions -->
  <mat-dialog-actions align="end" class="dialog-actions">
    <button mat-button (click)="onCancel()" [disabled]="loading">Cancelar</button>
    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      [disabled]="form.invalid || loading"
    >
      <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
      <span *ngIf="loading">Guardando...</span>
      <span *ngIf="!loading">{{ isEditMode ? 'Actualizar' : 'Crear' }}</span>
    </button>
  </mat-dialog-actions>
</div>
